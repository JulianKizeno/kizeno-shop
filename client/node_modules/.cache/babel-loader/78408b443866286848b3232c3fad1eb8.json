{"ast":null,"code":"var _jsxFileName = \"/Users/juliankizeno/Desktop/ironhack/labs/week8/final-project/kizeno-shop/client/src/components/App.js\";\nimport React, { Component } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport Navigation from './ui/navbar/Navbar';\nimport ProductList from './pages/product-list/ProductList';\nimport ProductDetails from './pages/product-details/ProductDetails';\nimport CartList from './pages/cart/CartList';\nimport Signup from './pages/signup/Signup';\nimport Login from './pages/login/Login';\nimport Profile from './pages/profile/Profile';\nimport AuthService from './../service/auth.service';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.setTheUser = userObj => this.setState({\n      loggedInUser: userObj\n    });\n\n    this.addToCart = productInfo => {\n      console.log('ProductInfo');\n      console.log(productInfo);\n      console.log(productInfo.id);\n      console.log(productInfo._id);\n      console.log('este es el carrito'); // Creo un objeto nuevo para no afectar la refencia del estado\n\n      let cart = [...this.state.cart];\n      console.log(cart); // Necesito saber si el producto (productInfo) que llega en los parametros está en el carro.\n      // Filtro el carro revisando cuantas veces está el producto (productInfo) en el carrro (cart), validando por el _id\n\n      const cuantasVecesEstaELProductoEnElCarro = cart.filter(elm => elm.id === productInfo._id).length;\n      console.log(cuantasVecesEstaELProductoEnElCarro);\n\n      if (cuantasVecesEstaELProductoEnElCarro) {\n        console.log('Está en el carro'); //Si el producto (productInfo) está por lo menos una vez en el carro hago esto\n        // Recorro todos los productos que tiene el carro en busqueda del que me enviaron (productInfo)\n\n        cart = cart.map(elm => {\n          if (elm.id === productInfo.id) {\n            // En el momento que encuentre el producto le hago las vueltas\n            elm.price += productInfo.price;\n            elm.count++;\n          }\n\n          console.log(elm);\n          return elm;\n        });\n      } else {\n        // Si estoy aquí es porque no está el producto en el carro\n        console.log('No esta en el carro');\n        cart.push({\n          product: productInfo,\n          count: 1,\n          price: productInfo.price\n        });\n      }\n\n      console.log('Este es el carro final');\n      console.log(cart);\n      this.setState({\n        cart\n      });\n    };\n\n    this.fetchUser = () => {\n      if (this.state.loggedInUser === null) {\n        this.authService.isLoggedIn().then(response => this.setTheUser(response.data)).catch(() => this.setTheUser(false));\n      }\n    };\n\n    this.state = {\n      loggedInUser: null,\n      cart: []\n    };\n    this.authService = new AuthService();\n  }\n\n  render() {\n    console.log(this.state.cart);\n    this.fetchUser();\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navigation, {\n      cart: this.state.cart,\n      setTheUser: this.setTheUser,\n      loggedInUser: this.state.loggedInUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/products\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(ProductList, Object.assign({\n        loggedInUser: this.state.loggedInUser\n      }, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 60\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/products/oneProduct/:productId\",\n      render: props => /*#__PURE__*/React.createElement(ProductDetails, Object.assign({\n        loggedInUser: this.state.loggedInUser,\n        cart: this.state.cart,\n        addToCart: this.addToCart\n      }, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 76\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/cart\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(CartList, Object.assign({\n        cart: this.state.cart,\n        loggedInUser: this.state.loggedInUser\n      }, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 56\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      render: props => /*#__PURE__*/React.createElement(Signup, Object.assign({}, props, {\n        setTheUser: this.setTheUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 52\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      render: props => /*#__PURE__*/React.createElement(Login, Object.assign({}, props, {\n        setTheUser: this.setTheUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 51\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/profile\",\n      render: () => this.state.loggedInUser ? /*#__PURE__*/React.createElement(Profile, {\n        loggedInUser: this.state.loggedInUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 76\n        }\n      }) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 129\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/juliankizeno/Desktop/ironhack/labs/week8/final-project/kizeno-shop/client/src/components/App.js"],"names":["React","Component","Switch","Route","Redirect","Navigation","ProductList","ProductDetails","CartList","Signup","Login","Profile","AuthService","App","constructor","setTheUser","userObj","setState","loggedInUser","addToCart","productInfo","console","log","id","_id","cart","state","cuantasVecesEstaELProductoEnElCarro","filter","elm","length","map","price","count","push","product","fetchUser","authService","isLoggedIn","then","response","data","catch","render","props"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport { Switch, Route, Redirect } from 'react-router-dom'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './App.css'\n\nimport Navigation from './ui/navbar/Navbar'\nimport ProductList from './pages/product-list/ProductList'\nimport ProductDetails from './pages/product-details/ProductDetails'\nimport CartList from './pages/cart/CartList'\nimport Signup from './pages/signup/Signup'\nimport Login from './pages/login/Login'\nimport Profile from './pages/profile/Profile'\n\nimport AuthService from './../service/auth.service'\n\nclass App extends Component {\n\n  constructor() {\n    super()\n    this.state = { \n      loggedInUser: null, \n      cart: [] \n    }\n    this.authService = new AuthService()\n    \n  }\n\n  setTheUser = userObj => this.setState({ loggedInUser: userObj })\n\n  addToCart = (productInfo) =>{\n    console.log('ProductInfo')\n    console.log(productInfo)\n    console.log(productInfo.id)\n    console.log(productInfo._id)\n    console.log('este es el carrito')\n    // Creo un objeto nuevo para no afectar la refencia del estado\n    let cart = [...this.state.cart]\n    console.log(cart)\n\n    // Necesito saber si el producto (productInfo) que llega en los parametros está en el carro.\n    // Filtro el carro revisando cuantas veces está el producto (productInfo) en el carrro (cart), validando por el _id\n\n    const cuantasVecesEstaELProductoEnElCarro = cart.filter(elm => elm.id === productInfo._id).length\n\n    console.log(cuantasVecesEstaELProductoEnElCarro)\n\n    if(cuantasVecesEstaELProductoEnElCarro){\n      console.log('Está en el carro')\n      //Si el producto (productInfo) está por lo menos una vez en el carro hago esto\n\n      // Recorro todos los productos que tiene el carro en busqueda del que me enviaron (productInfo)\n      cart = cart.map(elm => {\n        if(elm.id === productInfo.id){\n          // En el momento que encuentre el producto le hago las vueltas\n          elm.price += productInfo.price\n          elm.count++\n        }\n        console.log(elm)\n        return elm\n      })\n    }else{\n      // Si estoy aquí es porque no está el producto en el carro\n      console.log('No esta en el carro')\n      cart.push({\n        product: productInfo,\n        count: 1,\n        price: productInfo.price\n      })\n    }\n\n    console.log('Este es el carro final')\n    console.log(cart)\n    this.setState({cart})   \n }\n\n  fetchUser = () => {\n    if (this.state.loggedInUser === null) {\n      this.authService.isLoggedIn()\n        .then(response => this.setTheUser(response.data))\n        .catch(() => this.setTheUser(false))\n    }\n  } \n\n\n  render() {\n\n    console.log(this.state.cart)\n\n    this.fetchUser()\n\n    return (\n      <>\n        <Navigation cart={this.state.cart} setTheUser={this.setTheUser} loggedInUser={this.state.loggedInUser} /> \n\n        <main>\n\n          <Switch>\n            <Route path=\"/products\" exact render={props => <ProductList loggedInUser={this.state.loggedInUser} {...props} />} />\n            <Route path=\"/products/oneProduct/:productId\" render={props => <ProductDetails loggedInUser={this.state.loggedInUser} cart={this.state.cart} addToCart={this.addToCart} {...props} />} />\n            <Route path=\"/cart\" exact render={props => <CartList cart={this.state.cart} loggedInUser={this.state.loggedInUser} {...props} />} />\n            <Route path=\"/signup\" render={props => <Signup {...props} setTheUser={this.setTheUser} />} />\n            <Route path=\"/login\" render={props => <Login {...props} setTheUser={this.setTheUser} />} />\n            <Route path=\"/profile\" render={() => this.state.loggedInUser ? <Profile loggedInUser={this.state.loggedInUser} /> : <Redirect to=\"/\" />} />\n          </Switch>\n\n        </main>\n      </>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}